<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#e7e4c0"
    text_color: "#4a4939"
    icon_color: "#4a4939"
    ripple_color: "#c5bdd2"
    selected_color: "#0c6c4d"


<DrawerLabelItem@MDNavigationDrawerItem>
    text_color: "#4a4939"
    icon_color: "#4a4939"
    focus_behavior: False
    selected_color: "#4a4939"
    _no_ripple_effect: True
    

MDScreen:
    MDNavigationLayout:
        ScreenManager:
            id: sm_global

            #Pantallas
            MDScreen:
                name: "inicio"
                MDAnchorLayout:
                    anchor_x: 'center'
                    anchor_y: 'center'

                    MDRectangleFlatButton:
                        text: 'Iniciar inspección'
                        on_release:
                            sm_global.current = 'info_general'
                            nav_drawer.set_state("close")
                

            MDScreen:
                name: "info_general"

                BoxLayout:
                    orientation: 'vertical'

                    MDTopAppBar:
                        title: "Información General"
                        elevation: 4
                        pos_hint: {"top": 1}
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                        right_action_items: [["close-circle-outline", lambda x: app.cancelar_proceso_d()], ["content-save-outline", lambda x: app.mostrar_dialogo_guardar()]]

                    ScrollView:
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: self.minimum_height
                            padding: 80
                            spacing: 25
                            
                            #Box de textfields

                            BoxLayout:
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 10

                                BoxLayout:
                                    orientation: 'vertical'
                            

                                    MDLabel:
                                        halign: "center"
                                        text: "Información General"
                                        font_style: "H4"
                                        size: self.size

                                

                                MDTextField:
                                    id: nombre_proyecto
                                    input_filter: lambda text, from_undo: text if text.isalpha() else ""
                                    hint_text: "Nombre de Proyecto:"
                                    

                                MDTextField:
                                    id: tipologia_vivienda
                                    hint_text: "Tipología de Vivienda:"
                                    multiline: False
                                    input_filter: lambda text, from_undo: text if all(c.isalnum() or c == ',' for c in text) else ""

                                MDTextField:
                                    id: direccion
                                    hint_text: "Dirección:"
                                    input_filter: lambda text, from_undo: text if all(c.isalnum() or c == ',' for c in text) else ""

                                MDTextField:
                                    id: etapa
                                    hint_text: "Etapa:"
                                    input_filter: 'int'

                                MDTextField:
                                    id: superficie_vivienda
                                    hint_text: "Superficie de Vivienda:"
                                    input_filter: 'int'

                                MDTextField:
                                    id: numero_pisos
                                    hint_text: "Número de Pisos:"
                                    input_filter: 'int'

                                MDTextField:
                                    id: orientacion_fachada
                                    hint_text: "Orientación Fachada:"
                                    input_filter: lambda text, from_undo: text if text.isalpha() else ""

                                MDTextField:
                                    id: orientacion_acceso
                                    hint_text: "Orientación Acceso:"
                                    input_filter: lambda text, from_undo: text if text.isalpha() else ""

                                MDTextField:
                                    id: temp_exterior
                                    hint_text: "Temperatura exterior:"

                                MDTextField:
                                    id: hum_exterior
                                    hint_text: "Humedad exterior:"

                                MDTextField:
                                    id: temp_interior
                                    hint_text: "Temperatura interior:"

                                MDTextField:
                                    id: hum_interior
                                    hint_text: "Humedad interior:"

                                MDTextField:
                                    id: años_uso_vivienda
                                    hint_text: "Años de uso de la vivienda:"
                                    input_filter: 'int'

                                MDTextField:
                                    id: nom_inspector
                                    hint_text: "Inspector CITEC UBB:"
                                    input_filter: lambda text, from_undo: text if text.isalpha() else ""

                                MDTextField:
                                    id: ci_inspector
                                    hint_text: "RUT Inspector:"
                                    helper_text: "Solo se permiten números (sin guión ni puntos)"
                                    helper_text_mode:"persistent"
                                    input_filter: 'int'

                                MDTextField:
                                    id: num_recintos
                                    hint_text: "N° de Recintos vivienda:"
                                    input_filter: 'int'

                                MDTextField:
                                    id: num_habitantes
                                    hint_text: "Total número de habitantes:"
                                    input_filter: 'int'

                                MDTextField:
                                    id: num_adultos
                                    hint_text: "Adultos:"
                                    input_filter: 'int'

                                MDTextField:
                                    id: num_niños
                                    hint_text: "Niños en edad escolar:"
                                    input_filter: 'int'

                                MDTextField:
                                    id: num_adultos_may
                                    hint_text: "Adultos Mayores:"
                                    input_filter: 'int'

                                MDTextField:
                                    id: obs_item_1
                                    multiline: True
                                    hint_text: "Observaciones Información General:"

                                MDTextField:
                                    id: ocup_dia
                                    hint_text: "Ocupación todo el día:"

                                MDTextField:
                                    id: ocup_intermitente
                                    hint_text: "Ocupación intermitente:"

                                MDTextField:
                                    id: dens_ocup_prev
                                    hint_text: "Densidad ocupacional prevista:"
                                
                                MDTextField:
                                    id: dens_ocup_real                                    
                                    hint_text: "Densidad ocupacional real:"
                                
                                MDTextField:
                                    id: obs_item_2
                                    multiline: True
                                    hint_text: "Observaciones Ocupación Vivienda:"


                            
                            
                            #Bock de Checkboxes
                            BoxLayout:
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 20

                                #checkbox clima

                                MDLabel:
                                    halign: "left"
                                    text: "Clima:"
                                    font_style: "H6"
                                    size: self.size

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height

                                    MDCheckbox:
                                        id: checkbox_soleado
                                        active: False
                                        group: "clima_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Soleado")

                                    MDLabel:
                                        text: "Soleado"

                                    MDCheckbox:
                                        id: checkbox_nublado
                                        active: False
                                        group: "clima_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Nublado")

                                    MDLabel:
                                        text: "Nublado"

                                    MDCheckbox:
                                        id: checkbox_lluvioso
                                        active: False
                                        group: "clima_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Lluvioso")
                                        

                                    MDLabel:
                                        text: "Lluvioso"

                                    MDCheckbox:
                                        id: checkbox_par_nublado
                                        active: False
                                        group: "clima_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Parcialmente Nublado")
                                        
                                    MDLabel:
                                        text: "Parcialmente Nublado"
                                        font_size: 15






                                #checkbox Recibido por:

                                MDLabel:
                                    halign: "left"
                                    text: "Recibido por:"
                                    font_style: "H6"
                                    
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height
                                    

                                    MDCheckbox:
                                        active: False
                                        group: "recibido_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Propietario")

                                    MDLabel:
                                        text: "Propietario"

                                    MDCheckbox:
                                        active: False
                                        group: "recibido_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Arrendatario")

                                    MDLabel:
                                        text: "Arrendatario"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "recibido_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Otro")

                                    MDLabel:
                                        text: "Otro"

                                MDLabel:
                                    halign: "left"
                                    text: "¿Quien?"
                                    font_style: "H6"
                                    size: self.size

                                MDTextField:
                                    id: nombre_recibido_por
                                    hint_text: "Nombre de la persona que recibió"
                                    input_filter: lambda text, from_undo: text if text.isalpha() else ""


                                MDLabel:
                                    halign: "left"
                                    text: "Ampliaciones:"
                                    font_style: "H6"
                                    size: self.size

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height
                                    

                                    MDCheckbox:
                                        active: False
                                        group: "ampliaciones_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Ampliaciones: Si")

                                    MDLabel:
                                        text: "Si"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "ampliaciones_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Ampliaciones: No")

                                    MDLabel:
                                        text: "No"
                                
                                MDLabel:
                                    halign: "left"
                                    text: "Detalles de ampliaciones:"
                                    font_style: "H6"
                                    size: self.size
                                
                                MDTextField:
                                    id: d_amp
                                    hint_text: "¿Cuántas y de qué tipo?"




                                MDLabel:
                                    halign: "left"
                                    text: "Reparaciones:"
                                    font_style: "H6"
                                    size: self.size

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height
                                    

                                    MDCheckbox:
                                        active: False
                                        group: "reparaciones_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Reparaciones: Si")

                                    MDLabel:
                                        text: "Si"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "reparaciones_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)
                                        on_press: app.guardar_checkbox("Reparaciones: No")

                                    MDLabel:
                                        text: "No"
                                
                                MDLabel:
                                    halign: "left"
                                    text: "Detalles de reparaciones:"
                                    font_style: "H6"
                                    size: self.size
                                
                                MDTextField:
                                    id: d_rep
                                    hint_text: "¿Cuántas y de qué tipo?"











            MDScreen:
                name: "H1_Muro_eje_A"

                BoxLayout:
                    orientation: 'vertical'

                    MDTopAppBar:
                        title: "Habiatacion 1"
                        elevation: 4
                        pos_hint: {"top": 1}
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                        right_action_items: [["close-circle-outline", lambda x: app.cancelar_proceso_d()], ["content-save-outline", lambda x: app.mostrar_dialogo_guardar()]]

                    ScrollView:
                        
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: self.minimum_height
                            padding: 80
                            spacing: 25
                            
                            #Box de textfields

                            BoxLayout:
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 10

                                BoxLayout:
                                    orientation: 'vertical'
                            

                                    MDLabel:
                                        halign: "center"
                                        text: "Muro eje A"
                                        font_style: "H4"
                                        size: self.size

                                
                                MDTextField:
                                    id: h1_meA_perimetral
                                    hint_text: "Muro Perimetral:"

                                MDTextField:
                                    id: h1_meA_interior
                                    hint_text: "Muro Interior:"
                                
                                MDTextField:
                                    id: h1_meA_sup_muro
                                    hint_text: "Superficie muro:"
                                
                                MDTextField:
                                    id: h1_meA_sup_ven
                                    hint_text: "Superficie ventana:"

                                MDTextField:
                                    id: h1_meA_sup_ven
                                    hint_text: "¿Cuánto tiempo calefacciona?"


                            
                            MDLabel:
                                halign: "left"
                                text: "¿Presenta patologías visibles?"
                                font_style: "H6"
                                size: self.size

                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                

                                MDCheckbox:
                                    active: False
                                    group: "patologias_group"
                                    size_hint: None, None
                                    size: dp(48), dp(48)

                                MDLabel:
                                    text: "Si"
                                
                                MDCheckbox:
                                    active: False
                                    group: "patologias_group"
                                    size_hint: None, None
                                    size: dp(48), dp(48)

                                MDLabel:
                                    text: "No"


                            MDLabel:
                                halign: "left"
                                text: "¿Olor a humedad?"
                                font_style: "H6"
                                size: self.size

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                

                                MDCheckbox:
                                    active: False
                                    group: "olor_group"
                                    size_hint: None, None
                                    size: dp(48), dp(48)

                                MDLabel:
                                    text: "Si"
                                
                                MDCheckbox:
                                    active: False
                                    group: "olor_group"
                                    size_hint: None, None
                                    size: dp(48), dp(48)

                                MDLabel:
                                    text: "No"
                            

                            MDLabel:
                                halign: "left"
                                text: "Sistema de ventilación (indicar en la planta su ubicación)"
                                font_style: "H6"
                                spacing: 50
                                size: self.size
                                
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                
                                MDLabel:
                                    halign: "left"
                                    text: "Aireador:"
                                    font_style: "H6"

                                    size: self.size

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height

                                    MDCheckbox:
                                        active: False
                                        group: "alrededor_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Operativo"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "alrededor_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "No Operativo"

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                
                                MDLabel:
                                    halign: "left"
                                    text: "Extractor:"
                                    font_style: "H6"
                                    size: self.size

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height

                                    MDCheckbox:
                                        active: False
                                        group: "extractor_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Operativo"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "extractor_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "No Operativo"

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                
                                MDLabel:
                                    halign: "left"
                                    text: "Campana:"
                                    font_style: "H6"
                                    size: self.size

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height

                                    MDCheckbox:
                                        active: False
                                        group: "campana_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Operativo"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "campana_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "No Operativo"

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                
                                MDLabel:
                                    halign: "left"
                                    text: "Celosía puerta:"
                                    font_style: "H6"
                                    size: self.size

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height

                                    MDCheckbox:
                                        active: False
                                        group: "celosia_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Operativo"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "celosia_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "No Operativo"
                            
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                
                                MDLabel:
                                    halign: "left"
                                    text: "Rebaje puerta:"
                                    font_style: "H6"
                                    size: self.size

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height

                                    MDCheckbox:
                                        active: False
                                        group: "rebaje_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Operativo"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "rebaje_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "No Operativo"

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                
                                MDLabel:
                                    halign: "left"
                                    text: "Otro:"
                                    font_style: "H6"
                                    size: self.size

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height

                                    MDCheckbox:
                                        active: False
                                        group: "otro_vent_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Operativo"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "otro_vent_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "No Operativo"





                            MDLabel:
                                halign: "left"
                                text: "Manifestaciones ocultas ¿fue pintado o limpiado últimamente?"
                                font_style: "H6"
                                size: self.size

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                

                                MDCheckbox:
                                    active: False
                                    group: "manifestaciones_group"
                                    size_hint: None, None
                                    size: dp(48), dp(48)

                                MDLabel:
                                    text: "Si"
                                
                                MDCheckbox:
                                    active: False
                                    group: "manifestaciones_group"
                                    size_hint: None, None
                                    size: dp(48), dp(48)

                                MDLabel:
                                    text: "No"

                                MDTextField:
                                    id: manifestaciones
                                    hint_text: "¿Cuál?"

                            




                            




                            MDLabel:
                                halign: "left"
                                text: "¿Modificaciones?"
                                font_style: "H6"
                                size: self.size

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: self.minimum_height
                                

                                MDCheckbox:
                                    active: False
                                    group: "modificaciones_group"
                                    size_hint: None, None
                                    size: dp(48), dp(48)

                                MDLabel:
                                    text: "Si"
                                
                                MDCheckbox:
                                    active: False
                                    group: "modificaciones_group"
                                    size_hint: None, None
                                    size: dp(48), dp(48)

                                MDLabel:
                                    text: "No"

                                MDTextField:
                                    id: mod
                                    hint_text: "¿Cuál?"



                            MDLabel:
                                halign: "left"
                                text: "Sistema de Calefacción"
                                font_style: "H6"
                                size: self.size

                            MDBoxLayout:
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height

                                    MDCheckbox:
                                        active: False
                                        group: "calefacion_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Eléctrico (seca)"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "calefacion_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Gas / parafina con evacuacipon exterior (seca)"
                                
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint_y: None
                                    height: self.minimum_height

                                    MDCheckbox:
                                        active: False
                                        group: "calefacion_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Biomasa con evacuación exterior (seca)"
                                    
                                    MDCheckbox:
                                        active: False
                                        group: "calefacion_group"
                                        size_hint: None, None
                                        size: dp(48), dp(48)

                                    MDLabel:
                                        text: "Parafina/gas móvil (húmeda)"

                                MDTextField:
                                    id: otro_cal
                                    hint_text: "Otro ¿cuál??"
























        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)

            MDNavigationDrawerMenu:

                MDNavigationDrawerHeader:
                    title: "Navegación"
                    title_color: "#4a4939"
                    text: "Hojas"
                    spacing: "4dp"
                    padding: "12dp", 0, 0, "56dp"


                #Informacion General

                MDNavigationDrawerLabel:
                    text: "Información General"
                    

                DrawerClickableItem:
                    icon: "file-outline"
                    text: 'Información General'
                    on_release:
                        sm_global.current = 'info_general'
                        nav_drawer.set_state("close")

